#+title: Computer Architecture

We have all the building blocks of a Computer. We have registers that we need to construct a memory from and we have an ALU, that combined with dedicated registers and a Program Counter, will form our CPU.

* Basic Architecture

The computer can be viewed as a set of chips that is connected by buses (conceptionally).

[[file:imgs/basic_archi.png]]

*Data Bus*:
- Holds the data that an instruction is to be executed on
- emited by data-memory
- read by ALU

*Control Bus*:
- Holds the next instruction to be executed
- emited by program-memory
- read by ALU

*Address Bus*:
- Holds
  - either the address of the next instruction to be executed
  - or the address of the data, that a instruction should be executed on
- emitted by address register or program counter
- read by memory

*Problem*:

How does one know what the address bus is currently holding?

The address of an instruction or the address of some data?

* Fetch-Execute Cycle

[[file:imgs/fetch_execute_issues.png]]

** Two-cycle solution

To solve this problem, one can imagine a simple Loop, where the address present in the address bus is interpreted either as an instruction to be retrieved *fetch* or the address of a data point, that a instruction is executed upon.

[[file:imgs/twoCycle.png]]

** Single-cycle solution

Another solution would be to have 2 seperate physical memories, where both memories are accessed simultanieously, in the same cycle

[[file:imgs/single_cycle.png]]

** Hack Solution

The Hack Computer Architecture has a unique design but basically is following the [[*Single-cycle solution][Single-cycle solution]].

The Hack Computer though is only interpreting instructions, but due to the design of the instruction the Computer can decide if it is either an instruction that computes something (C-instruction), or it is acutally the instruction to feed some data (A-Instruction).

[[file:imgs/CPU_abstraction.png]]

* Project - Build the computer

This is how the computer looks like

** CPU and memory

[[file:imgs/hackComputer2.png]]

** The CPU in detail

[[file:imgs/hackComputer.png]]

** The project

The goal of the project is to implement this Architecture with the Chips that we have already built.

We have a clear seperation of concerns. We need to build the RAM, the ROM and the CPU.

The ROM is actually provided by the NandToTetrisTeam as a built-in Chip, since it is really nothing else than the ROM with a limitation, and the team equipped the built-in chip with the ability to load a program in the hardware simulator.

*** The Memory

We need to put together a big RAM Chip, the Screen Chip and the Keyboard Chip

*** CPU

We need to figure out the way to combine all the Chips that we have built so far, paying attention to the different control bits as denoted in the [[*The CPU in detail][diagram]].
